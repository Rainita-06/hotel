{% extends "dashboard/base_dashboard.html" %}
{% load static %}
{% block content %}
<style>
  #sidebar,
  .sidebar,
  aside {
    display: none !important;
  }

  body {
    overflow: hidden;
  }
</style>

<!-- Modal overlay (centered vertically and horizontally) -->
<div class="fixed inset-0 bg-black/20 backdrop-blur-md flex justify-center items-center z-50">
    <!-- Form container -->
    <div class="bg-white rounded-xl shadow-lg w-[920px] max-w-full max-h-[90vh] overflow-auto p-6 relative">
        <h2 class="text-gray-900 text-lg font-semibold mb-4 font-['Inter']">Edit Member - {{ member.full_name }}</h2>
        
        <form method="POST" action="{% url 'edit_member' member.member_id %}" autocomplete="off">
            {% csrf_token %}
            
            <!-- Two-column grid -->
            <div class="grid grid-cols-2 gap-4">
                <!-- Left Column -->
                <div class="space-y-3">
                    <div>
                        <label class="block text-gray-700 text-sm font-medium font-['Inter']">Full Name</label>
                        <input type="text" name="full_name" value="{{ member.full_name }}" required
                            class="w-full h-10 px-3 rounded-lg border border-gray-300 text-gray-700 text-sm">
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-medium font-['Inter']">City</label>
                        <input type="text" name="city" value="{{ member.city }}"
                            class="w-full h-10 px-3 rounded-lg border border-gray-300 text-gray-700 text-sm">
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 text-sm font-medium font-['Inter']">Address</label>
                        <textarea name="address" placeholder="Enter address" 
                            class="w-full h-16 px-3 py-2 rounded-lg border border-gray-300 text-gray-700 text-sm">{{ member.address }}</textarea>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-3">
                    <!-- <div>
                        <label class="block text-gray-700 text-sm font-medium font-['Inter']">Mobile Number</label>
                        <input type="text" name="phone" value="{{ member.phone }}" required
                            class="w-full h-10 px-3 rounded-lg border border-gray-300 text-gray-700 text-sm">
                    </div> -->
                    <div>
  <label class="block text-gray-900 text-sm font-medium mb-2">
    Phone Number
  </label>

  <div class="flex h-12">
    <!-- Country Code Dropdown -->
    <div class="relative">
      <select name="country_code" id="countryCode"
        class="w-24 sm:w-32 bg-gray-50 rounded-tl-lg rounded-bl-lg border border-gray-200 text-black text-sm pl-3 pr-8 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 h-full cursor-pointer">
      </select>

      <svg class="w-4 h-4 absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-700"
        fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M19 9l-7 7-7-7" />
      </svg>
    </div>

    <!-- Phone Input -->
    <input type="tel"
      name="phone"
      value="{{ member.phone }}"
      required
      class="flex-1 bg-white rounded-tr-lg rounded-br-lg border border-gray-200 px-4 text-gray-900 text-base focus:ring-blue-500 focus:border-blue-500"
      placeholder="Enter phone number">
  </div>
</div>

                    
                    <div>
                        <label class="block text-gray-700 text-sm font-medium font-['Inter']">Email</label>
                        <input type="email" name="email" value="{{ member.email }}"
                            class="w-full h-10 px-3 rounded-lg border border-gray-300 text-gray-700 text-sm">
                    </div>
                    
                    <div class="flex items-center mt-2">
                        <input type="checkbox" name="is_active" id="id_is_active" 
                            class="h-4 w-4 text-blue-600 rounded border-gray-300" 
                            {% if member.is_active %}checked{% endif %}>
                        <label for="id_is_active" class="ml-2 block text-gray-700 text-sm font-medium font-['Inter']">
                            Active
                        </label>
                    </div>

                    <div>
  <label class="block text-gray-700 text-sm font-medium">
    Renew Membership
  </label>
  <select name="renew_months"
      class="w-full h-10 px-3 rounded-lg border border-gray-300 text-gray-700 text-sm">
      <option value="">Select duration</option>
      <option value="1">1 Month</option>
      <option value="3">3 Months</option>
      <option value="6">6 Months</option>
      <option value="12">1 Year</option>
  </select>
</div>

                    {% if not member.is_expired %}
                        <small class="text-red-500 text-sm block mt-1">
                            ‚ö†Ô∏è Membership not expired yet.
                        </small>
                    {% endif %}
                </div>
            </div>

            {% if error %}
            <div class="text-red-500 text-center mt-3">{{ error }}</div>
            {% endif %}

            <div class="flex justify-end mt-4">
                <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded">
                    Save
                </button>
                <a href="{% url 'member_list' %}"
                   class="ml-2 px-4 py-2 rounded-lg bg-gray-200 text-gray-700 font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
<script>

    const countries = [
  { code: '+1', name: 'USA', flag: 'üá∫üá∏' },
  { code: '+44', name: 'UK', flag: 'üá¨üáß' },
  { code: '+1', name: 'Canada', flag: 'üá®üá¶' },
  { code: '+61', name: 'Australia', flag: 'üá¶üá∫' },
  { code: '+91', name: 'India', flag: 'üáÆüá≥' },
  { code: '+86', name: 'China', flag: 'üá®üá≥' },
  { code: '+81', name: 'Japan', flag: 'üáØüáµ' },
  { code: '+49', name: 'Germany', flag: 'üá©üá™' },
  { code: '+33', name: 'France', flag: 'üá´üá∑' },
  { code: '+39', name: 'Italy', flag: 'üáÆüáπ' },
  { code: '+34', name: 'Spain', flag: 'üá™üá∏' },
  { code: '+7', name: 'Russia', flag: 'üá∑üá∫' },
  { code: '+55', name: 'Brazil', flag: 'üáßüá∑' },
  { code: '+52', name: 'Mexico', flag: 'üá≤üáΩ' },
  { code: '+27', name: 'South Africa', flag: 'üáøüá¶' },
  { code: '+82', name: 'South Korea', flag: 'üá∞üá∑' },
  { code: '+65', name: 'Singapore', flag: 'üá∏üá¨' },
  { code: '+852', name: 'Hong Kong', flag: 'üá≠üá∞' },
  { code: '+971', name: 'UAE', flag: 'üá¶üá™' },
  { code: '+966', name: 'Saudi Arabia', flag: 'üá∏üá¶' },
  { code: '+234', name: 'Nigeria', flag: 'üá≥üá¨' },
  { code: '+254', name: 'Kenya', flag: 'üá∞üá™' },
  { code: '+20', name: 'Egypt', flag: 'üá™üá¨' },
  { code: '+90', name: 'Turkey', flag: 'üáπüá∑' },
  { code: '+31', name: 'Netherlands', flag: 'üá≥üá±' },
  { code: '+46', name: 'Sweden', flag: 'üá∏üá™' },
  { code: '+47', name: 'Norway', flag: 'üá≥üá¥' },
  { code: '+358', name: 'Finland', flag: 'üá´üáÆ' },
  { code: '+45', name: 'Denmark', flag: 'üá©üá∞' },
  { code: '+41', name: 'Switzerland', flag: 'üá®üá≠' },
  { code: '+43', name: 'Austria', flag: 'üá¶üáπ' },
  { code: '+48', name: 'Poland', flag: 'üáµüá±' },
  { code: '+420', name: 'Czech Republic', flag: 'üá®üáø' },
  { code: '+36', name: 'Hungary', flag: 'üá≠üá∫' },
  { code: '+30', name: 'Greece', flag: 'üá¨üá∑' },
  { code: '+351', name: 'Portugal', flag: 'üáµüáπ' },
  { code: '+353', name: 'Ireland', flag: 'üáÆüá™' },
  { code: '+64', name: 'New Zealand', flag: 'üá≥üáø' },
  { code: '+60', name: 'Malaysia', flag: 'üá≤üáæ' },
  { code: '+66', name: 'Thailand', flag: 'üáπüá≠' },
  { code: '+62', name: 'Indonesia', flag: 'üáÆüá©' },
  { code: '+63', name: 'Philippines', flag: 'üáµüá≠' },
  { code: '+84', name: 'Vietnam', flag: 'üáªüá≥' },
  { code: '+855', name: 'Cambodia', flag: 'üá∞üá≠' },
  { code: '+95', name: 'Myanmar', flag: 'üá≤üá≤' },
  { code: '+673', name: 'Brunei', flag: 'üáßüá≥' },
  { code: '+976', name: 'Mongolia', flag: 'üá≤üá≥' },
  { code: '+92', name: 'Pakistan', flag: 'üáµüá∞' },
  { code: '+93', name: 'Afghanistan', flag: 'üá¶üá´' },
  { code: '+94', name: 'Sri Lanka', flag: 'üá±üá∞' },
  { code: '+977', name: 'Nepal', flag: 'üá≥üáµ' },
  { code: '+880', name: 'Bangladesh', flag: 'üáßüá©' },
  { code: '+968', name: 'Oman', flag: 'üá¥üá≤' },
  { code: '+973', name: 'Bahrain', flag: 'üáßüá≠' },
  { code: '+974', name: 'Qatar', flag: 'üá∂üá¶' },
  { code: '+965', name: 'Kuwait', flag: 'üá∞üáº' },
  { code: '+961', name: 'Lebanon', flag: 'üá±üáß' },
  { code: '+962', name: 'Jordan', flag: 'üáØüá¥' },
  { code: '+963', name: 'Syria', flag: 'üá∏üáæ' },
  { code: '+964', name: 'Iraq', flag: 'üáÆüá∂' },
  { code: '+98', name: 'Iran', flag: 'üáÆüá∑' },
  { code: '+972', name: 'Israel', flag: 'üáÆüá±' },
  { code: '+973', name: 'Bahrain', flag: 'üáßüá≠' },
  { code: '+974', name: 'Qatar', flag: 'üá∂üá¶' },
  { code: '+975', name: 'Bhutan', flag: 'üáßüáπ' },
  { code: '+976', name: 'Mongolia', flag: 'üá≤üá≥' },
  { code: '+977', name: 'Nepal', flag: 'üá≥üáµ' },
  { code: '+992', name: 'Tajikistan', flag: 'üáπüáØ' },
  { code: '+993', name: 'Turkmenistan', flag: 'üáπüá≤' },
  { code: '+994', name: 'Azerbaijan', flag: 'üá¶üáø' },
  { code: '+995', name: 'Georgia', flag: 'üá¨üá™' },
  { code: '+996', name: 'Kyrgyzstan', flag: 'üá∞üá¨' },
  { code: '+998', name: 'Uzbekistan', flag: 'üá∫üáø' },
  { code: '+213', name: 'Algeria', flag: 'üá©üáø' },
  { code: '+216', name: 'Tunisia', flag: 'üáπüá≥' },
  { code: '+212', name: 'Morocco', flag: 'üá≤üá¶' },
  { code: '+218', name: 'Libya', flag: 'üá±üáæ' },
  { code: '+220', name: 'Gambia', flag: 'üá¨üá≤' },
  { code: '+221', name: 'Senegal', flag: 'üá∏üá≥' },
  { code: '+222', name: 'Mauritania', flag: 'üá≤üá∑' },
  { code: '+223', name: 'Mali', flag: 'üá≤üá±' },
  { code: '+224', name: 'Guinea', flag: 'üá¨üá≥' },
  { code: '+225', name: 'Ivory Coast', flag: 'üá®üáÆ' },
  { code: '+226', name: 'Burkina Faso', flag: 'üáßüá´' },
  { code: '+227', name: 'Niger', flag: 'üá≥üá™' },
  { code: '+228', name: 'Togo', flag: 'üáπüá¨' },
  { code: '+229', name: 'Benin', flag: 'üáßüáØ' },
  { code: '+230', name: 'Mauritius', flag: 'üá≤üá∫' },
  { code: '+231', name: 'Liberia', flag: 'üá±üá∑' },
  { code: '+232', name: 'Sierra Leone', flag: 'üá∏üá±' },
  { code: '+233', name: 'Ghana', flag: 'üá¨üá≠' },
  { code: '+235', name: 'Chad', flag: 'üáπüá©' },
  { code: '+236', name: 'Central African Republic', flag: 'üá®üá´' },
  { code: '+237', name: 'Cameroon', flag: 'üá®üá≤' },
  { code: '+238', name: 'Cape Verde', flag: 'üá®üáª' },
  { code: '+239', name: 'Sao Tome & Principe', flag: 'üá∏üáπ' },
  { code: '+240', name: 'Equatorial Guinea', flag: 'üá¨üá∂' },
  { code: '+241', name: 'Gabon', flag: 'üá¨üá¶' },
  { code: '+242', name: 'Congo', flag: 'üá®üá¨' },
  { code: '+243', name: 'DRC', flag: 'üá®üá©' },
  { code: '+244', name: 'Angola', flag: 'üá¶üá¥' },
  { code: '+245', name: 'Guinea-Bissau', flag: 'üá¨üáº' },
  { code: '+246', name: 'Diego Garcia', flag: 'üá©üá¨' },
  { code: '+247', name: 'Ascension', flag: 'üá¶üá®' },
  { code: '+248', name: 'Seychelles', flag: 'üá∏üá®' },
  { code: '+249', name: 'Sudan', flag: 'üá∏üá©' },
  { code: '+250', name: 'Rwanda', flag: 'üá∑üáº' },
  { code: '+251', name: 'Ethiopia', flag: 'üá™üáπ' },
  { code: '+252', name: 'Somalia', flag: 'üá∏üá¥' },
  { code: '+253', name: 'Djibouti', flag: 'üá©üáØ' },
  { code: '+255', name: 'Tanzania', flag: 'üáπüáø' },
  { code: '+256', name: 'Uganda', flag: 'üá∫üá¨' },
  { code: '+257', name: 'Burundi', flag: 'üáßüáÆ' },
  { code: '+258', name: 'Mozambique', flag: 'üá≤üáø' },
  { code: '+260', name: 'Zambia', flag: 'üáøüá≤' },
  { code: '+261', name: 'Madagascar', flag: 'üá≤üá¨' },
  { code: '+262', name: 'Reunion', flag: 'üá∑üá™' },
  { code: '+263', name: 'Zimbabwe', flag: 'üáøüáº' },
  { code: '+264', name: 'Namibia', flag: 'üá≥üá¶' },
  { code: '+265', name: 'Malawi', flag: 'üá≤üáº' },
  { code: '+266', name: 'Lesotho', flag: 'üá±üá∏' },
  { code: '+267', name: 'Botswana', flag: 'üáßüáº' },
  { code: '+268', name: 'Eswatini', flag: 'üá∏üáø' },
  { code: '+269', name: 'Comoros', flag: 'üá∞üá≤' },
  { code: '+290', name: 'St Helena', flag: 'üá∏üá≠' },
  { code: '+291', name: 'Eritrea', flag: 'üá™üá∑' },
  { code: '+297', name: 'Aruba', flag: 'üá¶üáº' },
  { code: '+298', name: 'Faroe Islands', flag: 'üá´üá¥' },
  { code: '+299', name: 'Greenland', flag: 'üá¨üá±' },
  { code: '+350', name: 'Gibraltar', flag: 'üá¨üáÆ' },
  { code: '+351', name: 'Portugal', flag: 'üáµüáπ' },
  { code: '+352', name: 'Luxembourg', flag: 'üá±üá∫' },
  { code: '+353', name: 'Ireland', flag: 'üáÆüá™' },
  { code: '+354', name: 'Iceland', flag: 'üáÆüá∏' },
  { code: '+355', name: 'Albania', flag: 'üá¶üá±' },
  { code: '+356', name: 'Malta', flag: 'üá≤üáπ' },
  { code: '+357', name: 'Cyprus', flag: 'üá®üáæ' },
  { code: '+358', name: 'Finland', flag: 'üá´üáÆ' },
  { code: '+359', name: 'Bulgaria', flag: 'üáßüá¨' },
  { code: '+370', name: 'Lithuania', flag: 'üá±üáπ' },
  { code: '+371', name: 'Latvia', flag: 'üá±üáª' },
  { code: '+372', name: 'Estonia', flag: 'üá™üá™' },
  { code: '+373', name: 'Moldova', flag: 'üá≤üá©' },
  { code: '+374', name: 'Armenia', flag: 'üá¶üá≤' },
  { code: '+375', name: 'Belarus', flag: 'üáßüáæ' },
  { code: '+376', name: 'Andorra', flag: 'üá¶üá©' },
  { code: '+377', name: 'Monaco', flag: 'üá≤üá®' },
  { code: '+378', name: 'San Marino', flag: 'üá∏üá≤' },
  { code: '+380', name: 'Ukraine', flag: 'üá∫üá¶' },
  { code: '+381', name: 'Serbia', flag: 'üá∑üá∏' },
  { code: '+382', name: 'Montenegro', flag: 'üá≤üá™' },
  { code: '+383', name: 'Kosovo', flag: 'üáΩüá∞' },
  { code: '+385', name: 'Croatia', flag: 'üá≠üá∑' },
  { code: '+386', name: 'Slovenia', flag: 'üá∏üáÆ' },
  { code: '+387', name: 'Bosnia', flag: 'üáßüá¶' },
  { code: '+389', name: 'North Macedonia', flag: 'üá≤üá∞' },
  { code: '+40', name: 'Romania', flag: 'üá∑üá¥' },
  { code: '+41', name: 'Switzerland', flag: 'üá®üá≠' },
  { code: '+43', name: 'Austria', flag: 'üá¶üáπ' },
  { code: '+44', name: 'UK', flag: 'üá¨üáß' },
  { code: '+45', name: 'Denmark', flag: 'üá©üá∞' },
  { code: '+46', name: 'Sweden', flag: 'üá∏üá™' },
  { code: '+47', name: 'Norway', flag: 'üá≥üá¥' },
  { code: '+48', name: 'Poland', flag: 'üáµüá±' },
  { code: '+49', name: 'Germany', flag: 'üá©üá™' },
  { code: '+500', name: 'Falkland Islands', flag: 'üá´üá∞' },
  { code: '+501', name: 'Belize', flag: 'üáßüáø' },
  { code: '+502', name: 'Guatemala', flag: 'üá¨üáπ' },
  { code: '+503', name: 'El Salvador', flag: 'üá∏üáª' },
  { code: '+504', name: 'Honduras', flag: 'üá≠üá≥' },
  { code: '+505', name: 'Nicaragua', flag: 'üá≥üáÆ' },
  { code: '+506', name: 'Costa Rica', flag: 'üá®üá∑' },
  { code: '+507', name: 'Panama', flag: 'üáµüá¶' },
  { code: '+508', name: 'St Pierre', flag: 'üáµüá≤' },
  { code: '+509', name: 'Haiti', flag: 'üá≠üáπ' },
  { code: '+590', name: 'Guadeloupe', flag: 'üá¨üáµ' },
  { code: '+591', name: 'Bolivia', flag: 'üáßüá¥' },
  { code: '+592', name: 'Guyana', flag: 'üá¨üáæ' },
  { code: '+593', name: 'Ecuador', flag: 'üá™üá®' },
  { code: '+594', name: 'French Guiana', flag: 'üá¨üá´' },
  { code: '+595', name: 'Paraguay', flag: 'üáµüáæ' },
  { code: '+596', name: 'Martinique', flag: 'üá≤üá∂' },
  { code: '+597', name: 'Suriname', flag: 'üá∏üá∑' },
  { code: '+598', name: 'Uruguay', flag: 'üá∫üáæ' },
  { code: '+599', name: 'Curacao', flag: 'üá®üáº' },
  { code: '+670', name: 'East Timor', flag: 'üáπüá±' },
  { code: '+672', name: 'Antarctica', flag: 'üá¶üá∂' },
  { code: '+674', name: 'Nauru', flag: 'üá≥üá∑' },
  { code: '+675', name: 'Papua New Guinea', flag: 'üáµüá¨' },
  { code: '+676', name: 'Tonga', flag: 'üáπüá¥' },
  { code: '+677', name: 'Solomon Islands', flag: 'üá∏üáß' },
  { code: '+678', name: 'Vanuatu', flag: 'üáªüá∫' },
  { code: '+679', name: 'Fiji', flag: 'üá´üáØ' },
  { code: '+680', name: 'Palau', flag: 'üáµüáº' },
  { code: '+681', name: 'Wallis', flag: 'üáºüá´' },
  { code: '+682', name: 'Cook Islands', flag: 'üá®üá∞' },
  { code: '+683', name: 'Niue', flag: 'üá≥üá∫' },
  { code: '+684', name: 'American Samoa', flag: 'üá¶üá∏' },
  { code: '+685', name: 'Samoa', flag: 'üáºüá∏' },
  { code: '+686', name: 'Kiribati', flag: 'üá∞üáÆ' },
  { code: '+687', name: 'New Caledonia', flag: 'üá≥üá®' },
  { code: '+688', name: 'Tuvalu', flag: 'üáπüáª' },
  { code: '+689', name: 'French Polynesia', flag: 'üáµüá´' },
  { code: '+690', name: 'Tokelau', flag: 'üáπüá∞' },
  { code: '+691', name: 'Micronesia', flag: 'üá´üá≤' },
  { code: '+692', name: 'Marshall Islands', flag: 'üá≤üá≠' },
  { code: '+850', name: 'North Korea', flag: 'üá∞üáµ' },
  { code: '+852', name: 'Hong Kong', flag: 'üá≠üá∞' },
  { code: '+853', name: 'Macau', flag: 'üá≤üá¥' },
  { code: '+855', name: 'Cambodia', flag: 'üá∞üá≠' },
  { code: '+856', name: 'Laos', flag: 'üá±üá¶' },
  { code: '+880', name: 'Bangladesh', flag: 'üáßüá©' },
  { code: '+886', name: 'Taiwan', flag: 'üáπüáº' },
  { code: '+960', name: 'Maldives', flag: 'üá≤üáª' },
  { code: '+961', name: 'Lebanon', flag: 'üá±üáß' },
  { code: '+962', name: 'Jordan', flag: 'üáØüá¥' },
  { code: '+963', name: 'Syria', flag: 'üá∏üáæ' },
  { code: '+964', name: 'Iraq', flag: 'üáÆüá∂' },
  { code: '+965', name: 'Kuwait', flag: 'üá∞üáº' },
  { code: '+966', name: 'Saudi Arabia', flag: 'üá∏üá¶' },
  { code: '+967', name: 'Yemen', flag: 'üáæüá™' },
  { code: '+968', name: 'Oman', flag: 'üá¥üá≤' },
  { code: '+970', name: 'Palestine', flag: 'üáµüá∏' },
  { code: '+971', name: 'UAE', flag: 'üá¶üá™' },
  { code: '+972', name: 'Israel', flag: 'üáÆüá±' },
  { code: '+973', name: 'Bahrain', flag: 'üáßüá≠' },
  { code: '+974', name: 'Qatar', flag: 'üá∂üá¶' },
  { code: '+975', name: 'Bhutan', flag: 'üáßüáπ' },
  { code: '+976', name: 'Mongolia', flag: 'üá≤üá≥' },
  { code: '+977', name: 'Nepal', flag: 'üá≥üáµ' },
  { code: '+992', name: 'Tajikistan', flag: 'üáπüáØ' },
  { code: '+993', name: 'Turkmenistan', flag: 'üáπüá≤' },
  { code: '+994', name: 'Azerbaijan', flag: 'üá¶üáø' },
  { code: '+995', name: 'Georgia', flag: 'üá¨üá™' },
  { code: '+996', name: 'Kyrgyzstan', flag: 'üá∞üá¨' },
  { code: '+998', name: 'Uzbekistan', flag: 'üá∫üáø' }
];

// Populate dropdown with all countries
function populateCountryDropdown(savedCode) {
  const select = document.getElementById('countryCode');
  select.innerHTML = "";

  countries.forEach(country => {
    const option = document.createElement('option');
    option.value = country.code;   // keep + sign
    option.textContent = `${country.flag} ${country.code} ${country.name}`;

    if (country.code === savedCode) {
      option.selected = true;
    }

    select.appendChild(option);
  });
}

document.addEventListener('DOMContentLoaded', function () {
  const savedCode = "{{ member.country_code|default:'+62' }}";
  populateCountryDropdown(savedCode);
});
</script>
{% endblock %}
